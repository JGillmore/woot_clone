{% extends 'layout.html' %}

{% block title %}Cart{% endblock %}

{% block content %}
	<div class="row">
		<h1>{{request.session.name}}'s Cart</h1>
		<table class = "table table-striped">
			<col width="10%">
   			<thead>
      			<tr>
         			<th></th>
         			<th align="middle">Item</th>
         			<th align="middle">Price</th>
         			<th align="middle">Remove</th>
      			</tr>
   			</thead>
   			<tbody>
   			{% for i in cart_items %}
      			<tr>
      			{% load static %}
         			<td><a href="/item/{{i.item.id}}"><img src="{{i.image}}" alt="{{i.name}}" align="middle" width="140" height="70"></a></td>
         			<td><a href="item/{{i.item.id}}">{{i.item.name}}</a></td>
         			<td>${{i.item.price}}</td>
         			<td><a href="remove_cart/{{i.id}}"><span class="glyphicon glyphicon-trash" style="color: red; font-size: 2em;"></span></a></td>
      			</tr>
      		{% endfor %}
      			<tr>
      				<td></td>
      				<td align="right" style="font-size: 1.5em;">Total</td>
      				<td style="font-size: 1.5em;">${{sum_total}}</td>
      				<td></td>
      			</tr>		
   			</tbody>
		</table>
	</div>
	{% for message in messages %}
		<p class='{{ message.tags }}'>{{message}}</p>
	{% endfor %}
	<h5>Enter Credit Card Info. Here</h5>
	<form method="post">
		{% csrf_token %}
		{% for field in form %}
			<div>{{ field.label_tag }} {{ field }}</div>
			{% if field.errors %}
			<div class="error">{{ field.errors }}</div>
			{% endif %}
		{% endfor %}
		{% if form.non_field_errors %}
		<div class="error">
			<ul>
				{% for err in form.non_field_errors %}
					<li>{{ err }}</li>
				{% endfor %}
			</ul>
		</div>
		{% endif %}
		<button" type="submit" name="button">Purchase</button>
	</form>
</div>
{% endblock %}
